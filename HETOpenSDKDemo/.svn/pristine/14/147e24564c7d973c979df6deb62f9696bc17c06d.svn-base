//
//  DeviceControlBusiness.h
//  openSDK
//
//  Created by mr.cao on 15/8/13.
//  Copyright (c) 2015年 peng. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "HETNetWorkRequestHeader.h"



typedef void(^successBlock)(id responseObject);
typedef void(^failureBlock)( NSError *error);






typedef NS_ENUM(NSUInteger,HETDeviceBindType)
{
    HETWIFIDeviceBindType=1,//WiFi绑定类型
    HETBLEDeviceBindType=2,//蓝牙绑定类型
};


typedef NS_ENUM(NSUInteger,HETBLEDeviceDataUploadType)
{
    HETBLEDeviceHistoryDataUploadType=1,//蓝牙设备历史数据上传类型
    HETBLEDeviceRealTimeDataUploadType=2,//蓝牙设备实时数据上传类型
};


@interface HETDeviceRequestBusiness : NSObject

/**
 *  下发控制设备
 *
 *  @param json     设备控制json
 *  @param deviceID 设备deviceID
 *  @param success  设备控制成功的回调
 *  @param failure  设备控制失败的回调
 */
- (void)deviceControlWithJSON:(NSString *)json
                 withDeviceID:(NSString *)deviceID
                      success:(successBlock)success
                      failure:(failureBlock)failure;



/**
 *  查询设备配置数据信息
 *
 *  @param deviceID 设备deviceID
 *  @param success  成功的回调
 *  @param failure  失败的回调
 */
- (void)fetchDeviceConfigDataWithDeviceID:(NSString *)deviceID
                              success:(successBlock)success
                              failure:(failureBlock)failure;



/**
 *  查询设备运行数据信息
 *
 *  @param deviceID 设备deviceID
 *  @param success  成功的回调
 *  @param failure  失败的回调
 */
- (void)fetchDeviceRunDataWithDeviceID:(NSString *)deviceID
                              success:(successBlock)success
                              failure:(failureBlock)failure;
/**
 *  查询绑定的所有设置列表
 *
 *  @param success 成功的回调
 *  @param failure 失败的回调

 */
- (void)fetchAllBindDeviceSuccess:(successBlock)success
                               failure:(failureBlock)failure;



/**
 *  解除设备绑定
 *
 *  @param deviceID 设备deviceID
 *  @param success  解除绑定成功的回调
 *  @param failure  解除绑定失败的回调
 */
- (void)unbindDeviceWithDeviceID:(NSString *)deviceID
                              success:(successBlock)success
                              failure:(failureBlock)failure;



/**
 *  设备绑定
 *
 *  @param macAddr         设备mac地址
 *  @param deviceBrandId   设备品牌名
 *  @param deviceTypeId    设备大分类
 *  @param deviceSubtypeId 设备子分类
 *  @param bindType        绑定类型（1-WiFi，2-蓝牙）
 *  @param success         绑定成功的回调
 *  @param failure         绑定失败的回调
 */


-(void)bindDeviceWithDeviceMAC:(NSString *)macAddr
                      deviceBrandId:(NSInteger) deviceBrandId
                      deviceTypeId:(NSInteger) deviceTypeId
                     deviceSubtypeId:(NSInteger) deviceSubtypeId
                      bindType:(HETDeviceBindType)bindType
                       success:(successBlock)success
                      failure:(failureBlock)failure;


/**
 *  查询WIFI设备绑定状态
 *
 *  @param deviceID 设备标识deviceID
 *  @param success  查询设备绑定状态成功的回调
 *  @param failure  查询设备绑定状态失败的回调
 */
-(void)fetchWIFIDeviceBindStateWithDeviceID:(NSString *)deviceID
                                    success:(successBlock)success
                                    failure:(failureBlock)failure;

/**
 *  设备数据上传（蓝牙）
 *
 *  @param deviceID 设备deviceID
 *  @param dataType 数据类型（1-历史数据，2-实时数据）
 *  @param data     需要上传的数据
 *  @param success  上传成功的回调
 *  @param failure  上传失败的回调
 */
- (void)uploadDeviceDataWithDeviceID:(NSString *)deviceID
                            dataType:(HETBLEDeviceDataUploadType) dataType
                                data:(NSData *)data
                             success:(successBlock)success
                             failure:(failureBlock)failure;





/**
 *  设备运行数据上传（蓝牙）
 *
 *  @param deviceID 设备deviceID
 *  @param protocolVersion 协议版本号
 *  @param data     需要上传的数据
 *  @param success  上传成功的回调
 *  @param failure  上传失败的回调
 */
- (void)uploadDeviceRunDataWithDeviceID:(NSString *)deviceID
                        protocolVersion:(NSInteger)protocolVersion
                                   data:(NSData *)data
                                success:(successBlock)success
                                failure:(failureBlock)failure;


/**
 *  上传实时数据(蓝牙)
 *
 *  @param deviceID 设备deviceID
 *  @param protocolVersion 协议版本号
 *  @param data     需要上传的数据
 *  @param success  上传成功的回调
 *  @param failure  上传失败的回调
 */
- (void)uploadDeviceRealTimeDataWithDeviceID:(NSString *)deviceID
                             protocolVersion:(NSInteger)protocolVersion
                                        data:(NSString *)data
                                     success:(successBlock)success
                                     failure:(failureBlock)failure;



/**
 *  普通网络请求
 *
 *  @param method     HTTP网络请求方法
 *  @param requestUrl 网络请求的URL
 *  @param params     请求参数
 *  @param needSign   是否需要签名
 *  @param success    网络请求成功的回调
 *  @param failure    网络请求失败的回调
 */

-(void)startRequestWithHTTPMethod: (HETRequestMethod)method  withRequestUrl:(NSString *)requestUrl processParams:(NSDictionary *)params needSign:(BOOL)needSign
                 BlockWithSuccess:(successBlock)success
                          failure:(failureBlock)failure;

/**
 *  上传文件的接口
 *
 *  @param requestUrl 网络请求的URL
 *  @param params     请求参数
 *  @param success    网络请求成功的回调
 *  @param failure    网络请求失败的回调
 */

-(void)startMultipartFormDataRequestWithRequestUrl:(NSString *)requestUrl processParams:(NSDictionary *)params  BlockWithSuccess:(successBlock)success
    failure:(failureBlock)failure;




@end
