//
//  Ble_Protocol_Tool.h
//  SmartHome
//
//  Created by Sandy wu on 14-8-7.
//  Copyright (c) 2014年 Het. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "CLBLEBaseProtocol.h"


@interface BLEMattressReform : NSObject
@property(nonatomic,assign)uint8_t         startflag;
@property(nonatomic,assign)uint16_t        device_software_version;
@property(nonatomic,assign)uint16_t        protocol_version;
@property(nonatomic,assign)uint8_t         encrypt_category;
@property(nonatomic,assign)uint16_t        cmd_no;
@property(nonatomic,strong)NSData*         uniqueID;
@property(nonatomic,assign)uint8_t         timezone;
@property(nonatomic,strong)NSData*         time;
@property(nonatomic,assign)uint16_t        body_length;
//----Ble_Protocol_Head_T----//
@property(nonatomic,strong)NSData*         body;
@property(nonatomic,assign)uint8_t         endflag;

@end
@interface BLEMattressProtocol :CLBLEBaseProtocol

uint8_t ble_currentTimeOffset();

void ble_gmtTimeString(uint8_t* timeValue);

void ble_gmtTimeString_new(uint8_t* timeValue);
void Init_Ble_Protocol_Head(uint8_t *packetArray,short comdNo,uint16_t dataLength,uint8_t* uniqueID,NSString *deviceVersion);
void Init_Ble_Protocol_Head_New(uint8_t *packetArray,short comdNo,uint16_t dataLength,uint8_t* uniqueID);
//获取统计数据的数据包
+(BLEMattressProtocol*)getRequestStatisticalPacketData:(NSString*)uinqueIDString;

//通知设备清除统计数据的数据包
+(BLEMattressProtocol*)getDeleteStatisticalPacketData:(NSString*)uinqueIDString;


/**
 *  获取实时数据数据包
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回获取实时数据的数据包
 */
+(BLEMattressProtocol*)getRequestRealTimePacketData:(NSString*)uinqueIDString;

/**
 *  确认蓝牙升级的数据包
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回获取蓝牙升级的数据包
 */
+(BLEMattressProtocol *)getRequestConfirmUpgrade:(NSString *)uinqueIDString;

+(BLEMattressProtocol *)getRequestConfirmUpgrade:(NSString *)uinqueIDString :(NSString *)deviceUpgradeVersion;

/* 新蓝牙协议 */
/**
 *  获取请求协议版本号的数据包
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回对应的数据包
 */
+(BLEMattressProtocol *)getRequestProtocolVersion:(NSString *)uinqueIDString;

/**
 *  获取请求蓝牙设备当前数据
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回对应的数据包
 */
+(NSData *)getRequestKeyData:(NSString *)uinqueIDString;

/**
 *  获取蓝牙同步数据包
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回对应数据包
 */
+ (BLEMattressProtocol *)getRequestSyncData:(NSString *)uinqueIDString;

/**
 *  获取蓝牙绑定数据包
 *
 *  @param uinqueIDString 唯一ID
 *
 *  @return 返回对应数据包
 */
+ (NSData *)getRequestBleBindData:(NSString *)uinqueIDString;

+(BLEMattressReform*)transformData:(NSData *)data;
@end
